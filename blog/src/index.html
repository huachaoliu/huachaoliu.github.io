<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>我只是一个散漫的码农</title>
    <link class="target" rel="stylesheet" href="./static/css/reset.css">
    <link class="target" rel="stylesheet" href="./static/css/style.css">
    <script class="target" src="./static/js/ajax.js"></script>
    <script class="target" src="./static/js/UI.js"></script>
    <script class="target" src="./static/js/signals.min.js"></script>
    <script class="target" src="./static/js/Store.js"></script>
    <script class="target" src="./static/js/TopPanel.js"></script>
    <script class="target" src="./static/js/Navbar.js"></script>
    <script class="target" src="./static/js/layout/Wrapper.js"></script>
    <script class="target" src="./static/js/layout/Navigation.js"></script>
    <script class="target" src="./static/js/layout/Menubar.js"></script>
    <script class="target" src="./static/js/Sidebar.js"></script>
    <script class="target" src="./static/js/Content.js"></script>
    <script class="target" src="./static/js/Footer.js"></script>
    <script class="target" src="./static/js/pages/Home.js"></script>
    <script class="target" src="./static/js/layout/Article.js"></script>

    <!--filetext-->
    <script class="target" src="./static/js/text/homeFiles.js"></script>
</head>

<body>
    <script>
        var store = new Store();

        var topPanel = new TopPanel(store);
        document.body.appendChild(topPanel.dom);

        var navbar = new Navbar(store);
        document.body.appendChild(navbar.dom);

        var sidebar = new Sidebar(store);

        var content = new Content(store);

        var footer = new Footer(store);


        setTimeout(function () {

            navbar.addClass('onleft');

            document.body.appendChild(sidebar.dom);

            document.body.appendChild(content.dom);

            document.body.appendChild(footer.dom);            

        }, 1500);

        var signals = store.signals;

        signals.changeShowOrFalse.add(function () {

            store.setShowOrFalse();

            if (store.showOrFalse) {

                sidebar.removeClass('hide');

                navbar.removeClass('toright').addClass('onleft');

                content.removeClass('contentgoright').addClass('contentgoleft');

                footer.removeClass('footerleft').addClass('footer');

            } else {

                sidebar.addClass('hide');

                navbar.removeClass('navbar').removeClass('onleft').addClass('toright');

                content.removeClass('content').removeClass('contentgoleft').addClass('contentgoright');

                footer.removeClass('footer').addClass('footerleft');
            }
        });

        signals.goTopChanged.add(function () {

            if (document.body.scrollTop) {
            
                var timer = null;
            
                var topY = document.body.scrollTop;
            
                clearInterval(timer);
            
                timer = setInterval(function () {
            
                    topY -= 50;
            
                    if (topY <= 0) clearInterval(timer);
            
                    document.body.scrollTop = topY;
            
                }, 10);
            }
        });

    </script>
</body>

</html>